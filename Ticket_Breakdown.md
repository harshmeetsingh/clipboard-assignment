# Ticket Breakdown

We are a staffing company whose primary purpose is to book Agents at Shifts posted by Facilities on our platform. We're working on a new feature which will generate reports for our client Facilities containing info on how many hours each Agent worked in a given quarter by summing up every Shift they worked. Currently, this is how the process works:

- Data is saved in the database in the Facilities, Agents, and Shifts tables
- A function `getShiftsByFacility` is called with the Facility's id, returning all Shifts worked that quarter, including some metadata about the Agent assigned to each
- A function `generateReport` is then called with the list of Shifts. It converts them into a PDF which can be submitted by the Facility for compliance.

## You've been asked to work on a ticket. It reads:

**Currently, the id of each Agent on the reports we generate is their internal database id. We'd like to add the ability for Facilities to save their own custom ids for each Agent they work with and use that id when generating reports for them.**

Based on the information given, break this ticket down into 2-5 individual tickets to perform. Provide as much detail for each ticket as you can, including acceptance criteria, time/effort estimates, and implementation details. Feel free to make informed guesses about any unknown details - you can't guess "wrong".

You will be graded on the level of detail in each ticket, the clarity of the execution plan within and between tickets, and the intelligibility of your language. You don't need to be a native English speaker, but please proof-read your work.

## Assumptions made

1. An Agent details UI portal exists to view and update Agent details
2. An Agent can change the facility they are working from.
3. Facility id and Agent Ids can be used to uniquely identify an agent and a facility respectively
4. Pdf is being generated by a third party library which takes a metadata object to fill the placeholders value in an already existing template provided for pdf generation

## Your Breakdown Here

Ticket breakdown

- Ticket: Creating a new column for custom Ids

  Description: Currently on internal Ids for agents is being used, but we would like the ability for facilities to also store a custom Id for the agents they are working with. Need to introduce a new column to store custom Ids for agents along with there internal db id. Also need to update customIds for already existing Agents

  Implementation:

  1. New column to be introduced in Agent db.
  2. Writing a script/dms to fill up the column data for already existing Agents

- Ticket: Value for the customid

  Description: Value for custom id should be designed in such a way that it has information related to an agents internal id, as well as the facility id. come up with a design for custom id using the unique identifier for a facility and a unique agent Id.

  Implementation:

  1. Come up with a value of custom id that contains information from both Agent internal Id and Facility Id.

- Ticket: Updates allowed on customid

  Description: In case an agent changes the facility. In that case the custom Id field should be updatable. An edit functionality needs to be introduced in the Employee details portal. Implementing update customId functionality in the backend as well. The update api should take agent internalid and facility id as input and create new updateId using the customId design and update in the db.

  Implementation:

  1. Make the facility feild editable if not already. Implement a dropdown to select from already existing facilities
  2. Create a Update facilty id button which will be enabled once the facility value is selected from dropdown.
  3. Integrate with backend update api

- Ticket: Introducing a new field customAgentId in metadata
  Description: The `getShiftsByFacility` needs to be updated to return customId field in the agent metadata, along with shifts data being fetched from facilities db

  Implementation:

  1. Update in function implementation of getShiftsByFacility to fetch and update custom Id from Agents table along with other metadata
  2. Will require updates in the query being used to fetch metadata along with shift data.

- Ticket: Changing the impplementation for generateReport to use customid
  Description: `generateReport` currently uses the internal Agent Id to generate reports requirement is to update this field with customid that will be available with the updated metadata in `getShiftsByFacility` response

  Implementation:

  1. Update in function implementation of generateReport to add customid instead of agent internal id to create metadata for pdf generation.
  2. No change reequired in the template for pdf generation
